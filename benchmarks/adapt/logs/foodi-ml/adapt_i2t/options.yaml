dataset:
  text_repr: word
  loader_name: indisk_image
  train:
    batch_size: 30
    workers: 1
    data: foodiml.es
  val:
    batch_size: 1
    limit: 5000
    data:
    - foodiml.es
    workers: 1
  adapt:
    data: []
  vocab_paths:
  - .vocab_cache/foodiml_vocab.json
model:
  latent_size: 2048
  txt_enc:
    name: gru
    params:
      embed_dim: 300
      use_bi_gru: true
    pooling: none
    devices:
    - cuda
  img_enc:
    name: full_image
    params:
      img_dim: 2048
    devices:
    - cuda
    pooling: none
  similarity:
    name: adapt_i2t
    params:
      latent_size: 2048
      gamma: 10
      train_gamma: false
      device: cuda
      k: 36
    device: cuda
optimizer:
  name: adamax
  params:
    lr: 0.001
    gradual_warmup_steps:
    - 0.5
    - 2.0
    - 4000
    lr_decay_epochs:
    - 10000
    - 20000
    - 3000
    lr_decay_rate: 0.25
  lr_scheduler:
    name: null
    params:
      step_size: 1000
      gamma: 1
  grad_clip: 2.0
criterion:
  margin: 0.2
  max_violation: false
  beta: 0.991
engine:
  eval_before_training: false
  print_freq: 25
  nb_epochs: 50
  early_stop: 20
  valid_interval: 235
exp:
  outpath: logs/foodi-ml/adapt_i2t/
